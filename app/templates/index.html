{% extends "base.html" %}
{% block content %}
<div id="page" class="container">
  <h1>Blood Pressure and Pulse</h1>

  <form id="entry-form"
        action="/add" method="post"
        hx-post="/add" hx-target="#page" hx-swap="outerHTML" hx-disabled-elt="button">
    <input name="line" type="text" placeholder="e.g.: 120 80 56 125 85 60" inputmode="numeric" value="{{ input_value or '' }}" />
    <button type="submit">Save</button>
  </form>

  <div class="status">{{ status_msg or "" }}</div>
  <div class="meta">Records: {{ entries_count }}</div>

  <div id="charts" class="charts">
    <img class="chart" alt="Blood Pressure and Pulse" src="/chart/combined.png?cb={{ cache_bust }}" />
  </div>

  <div class="measurements">
    <h2>Daily measurements</h2>
    <table>
      <thead>
        <tr>
          <th rowspan="2">Date</th>
          <th colspan="2">Morning</th>
          <th colspan="2">Evening</th>
        </tr>
        <tr>
          <th>Pressure</th>
          <th>Pulse</th>
          <th>Pressure</th>
          <th>Pulse</th>
        </tr>
      </thead>
      <tbody>
        {% for day in grouped_data %}
        <tr>
          <td>{{ day.date }}</td>
          <td>{% if day.morning %}{{ day.morning.sys }}/{{ day.morning.dia }}{% endif %}</td>
          <td>{% if day.morning %}{{ day.morning.pulse }}{% endif %}</td>
          <td>{% if day.evening %}{{ day.evening.sys }}/{{ day.evening.dia }}{% endif %}</td>
          <td>{% if day.evening %}{{ day.evening.pulse }}{% endif %}</td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
</div>
{% endblock %}

